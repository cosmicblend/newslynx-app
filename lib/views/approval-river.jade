extends layout

//- block css
//- 	link(rel='stylesheet', href='/stylesheets/fancybox/jquery.fancybox.css')

block drawer
	ul.division-switcher
		li(data-mode="my-alerts") My alerts
		li(data-mode="create-new") + Create
	.drawer-container(data-mode="my-alerts")
		//- .drawer-section-title.drawer-item  Show approval candidates from:
		//- ul#alert-sources.drawer-item
		.drawer-options
			.view-all.drawer-item Clear filters
		ul#alerts
	.drawer-container(data-mode="create-new")
		.drawer-section-title.drawer-item  Add any one of these alerts with the form on the right.


// This template has to be rendered in standard html because jade
// In all its glory
// Will not render underscore variables inside of attributes such as `.master-switch(data-enabled="<%= enabled %>")`
block templates
	script(type="text/jst")#alert-templ
		|<div class="drawer-list-outer">
		|	<div class="drawer-list-inner">
		|		<div class="headline"><%= settings.name %> <span class="count">&mdash; <%= countAssociatedItems(uid, 'alert_uid', 'river_items') %></span></div>
		|		<div class="description"><%= settings.search_query %></div>
		|		<div class="toolbar">
		// |			<div class="service-icon"><span data-icon="<%= settings.service %>"></span></div>
		|			<div class="btn edit settings-switch"><span class="fa fa-cog"></span> <span class="text">Edit</span></div>
		|			<div class="btn master-switch" data-enabled="<%= enabled %>"><%= formatEnabled(enabled) %></div>
		|		</div>
		|	</div>
		|</div>
		|<div class="settings-outer">
		|	<div class="settings-inner">
		|		<form>
		|			<%= bakeForm(settings) %>
		|			<div class="buttons-container">
		|				<button>Cancel</button> <input type="submit" value="Save">
		|			</div>
		|		</form>
		|	</div>
		|</div>		

	// script(type="text/jst")#alert-source-templ
	// 		label(for="<%= settings.name %>-alerts")
	// 			input(type="checkbox" name="<%= settings.name %>-alerts" checked)
	// 			span.service-icon(data-service-icon="<%= settings.name %>")
	// 			span.service-name <%= settings.name %>

	script(type="text/jst")#river-item-templ
		| <div class="river-item-container">
		|		<div class="approval-child" data-which="btns">
		|			<div class="approval-btn-container" data-which="yes"><div class="approval-btn">✓</div class="approval-btn"></div>
		|			<div class="approval-btn-container" data-which="no"><div class="approval-btn">×</div class="approval-btn"></div>
		|		</div>
		| 	
		|		<div class="approval-child" data-which="info">
		|			<div class="title"><%= title %></div>
		|			<div class="description">The carbon in our apple pies billions upon billions cosmos. Extraplanetary Hypatia. Tendrils of gossamer clouds? Rogue stirred by starlight across the centuries cosmic ocean white dwarf billions upon billions the carbon in our apple pies.</div>
		| 		<div class="toolbar">
		|	 			<div class="origin-alert"><%= alert_uid %></div>
		|			</div>
		|	</div>

block scripts
	script(src="javascripts/thirdparty/jquery-1.11.0.min.js")
	script(src="javascripts/thirdparty/underscore-min.js")
	script(src="javascripts/thirdparty/backbone-min.js")
	// script(src="javascripts/thirdparty/jquery.fancybox.pack.js")
	script(src="javascripts/main.js")