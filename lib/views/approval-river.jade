extends layout

block drawer
	ul.division-switcher
		li(data-mode="my-recipes") My recipes
		li(data-mode="create") + Create
	#drawer-pointers-container
	ul.drawer-list-item-ul#recipes


block css
	link(rel='stylesheet', href='/stylesheets/thirdparty/pikaday.css')

block templates
	script(type="text/jst")#drawer-my-recipes-templ
		<% if (hasRecipes) { %>
		.drawer-pointer Show me...
		.drawer-list-item
			.view-all.drawer-list-outer
				.inputs-container
					input(type="radio")
				.drawer-list-inner
					.title Pending alerts for all recipes
		.drawer-pointer Or, pending alerts for just...
		<% } else { %>
		.drawer-pointer 
			p You don't have any recipes yet!
			p Click the <span>Create</span> button above to start. Or, refresh the page if you've just made some.
		<% } %>

	script(type="text/jst")#drawer-create-templ
		.drawer-pointer  Add any one of these recipes with the form on the right.


	script(type="text/jst")#recipe-templ
		.drawer-list-outer.modal-parent
			.inputs-container
				input(type="radio")
			.drawer-list-inner
				.count <%= pending %> pending
				.title <%= name %>
				.description Query: `<%= displaySearchParams(source, settings) %>`
				.toolbar
					.btn.settings-switch
						span.octicon.octicon-gear
						span.text  Edit
					|<span class="service-icon" data-service="<%= serviceFromSource(source) %>"><span class="service-method-label"><%= methodFromSource(source) %></span></span>
					|<div class="btn enable-switch" data-enabled="<%= enabled %>"><%= formatEnabled(enabled) %></div>
			.modal-outer
				.modal-overlay
				.modal-inner
					.modal-title Recipe settings
					form
						//-<%= bakeRecipeUpdateForm(id, source, settings, name, 'schema') %>
						.show-hide-default-event This recipe triggers events with some default properties. 
							|<span class="toggle-default-event" data-status="<%= set_default_event %>"><%= formatDefaultEventEnabled(set_default_event) %></span>
						|<div class="default-event-container" <% (set_default_event) ? print(' style="display:block;"') : print('') %>>
						//-<%= bakeRecipeUpdateForm(id, source, default_event, name, 'default_event') %>
						|</div>
						.buttons-container
							button.cancel Cancel
							input.save(type="submit", value="Save")
							input.destroy(type="button", value="Delete")

	script(type="text/jst")#recipe-schema-list-item-templ
		|<div class="drawer-list-outer scroll-to" data-destination="<%= source %>">
		.drawer-list-inner
			.title <%= prettyPrintSource(source) %>
		|</div>

	script(type="text/jst")#recipe-schema-form-templ
		.recipe-form-container
			|<div class="recipe-title" id="<%= source %>-recipe"><span class="service-icon" data-service="<%= serviceFromSource(source) %>"></span><span class="text">New <%= prettyPrintSource(source) %> recipe</span></div>
			form
				//- <%= bakeForm(schema) %>
				.show-hide-default-event This recipe triggers events with some default properties. 
					span.toggle-default-event(data-status="false") Disabled
				.default-event-container
					//- <%= bakeForm(default_event) %>
				.buttons-container
					input.save(type="submit", value="Create")
					span.submit-msg

	script(type="text/jst")#alert-templ
		.river-item-container.modal-parent
			.approval-child(data-which="btns")
				.approval-btn-container(data-which="yes")
					.approval-btn ✓
				.approval-btn-container(data-which="no")
					.approval-btn ×
			.approval-child(data-which="info")
				.toolbar
					.origin-recipe From recipe: <%= getRecipeFromId(recipe_id).name %>
				.title <%= name %>
				.description <%= text %>

block bootstrap-data
	script(id="page-data").
		var pageData = {};
		pageData.recipeSchemas =!{JSON.stringify(recipeSchemas)};   
		pageData.accountRecipes =!{JSON.stringify(accountRecipes)};   
		pageData.alerts =!{JSON.stringify(alerts)};   
		pageData.eventCreatorSchema =!{JSON.stringify(eventCreatorSchema)};   
		pageData.articleSkeletons =!{JSON.stringify(articleSkeletons)};   


block scripts
	script(src="javascripts/thirdparty/jquery-1.11.0.min.js")
	script(src="javascripts/thirdparty/underscore-min.js")
	script(src="javascripts/thirdparty/backbone-min.js")
	script(src="javascripts/thirdparty/d3.v3.min.js")
	script(src="javascripts/thirdparty/isotope.pkgd.min.js")
	script(src="javascripts/thirdparty/jquery.easing.js")
	script(src="javascripts/thirdparty/pourover.js")
	script(src="javascripts/thirdparty/pikaday.js")
	script(src="javascripts/thirdparty/typeahead.bundle.min.js")

	//- Put it all together
	script(src="javascripts/main.bundled.js")