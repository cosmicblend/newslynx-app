extends layout

block drawer
	ul.division-switcher
		li(data-mode="compare") Compare
		li(data-mode="single") Detail view
	.drawer-pointer Selected articles will display in more detail on the right
	ul#article-list

block templates
	script(type="text/jst")#tag-templ
		.tag-container
			.tag-name <%= name %>
			.tag-count <%= count %>

	script(type="text/jst")#article-summary-templ
		.drawer-list-outer
			.inputs-container
				input(type="checkbox")
				input(type="radio")
			.drawer-list-inner
				.pub-date <%= date(pub_date) %>
				.title <%= headline %>

	script(type="text/jst")#article-detail-templ
		.article-detail-container
			.pub-date <%= date(pub_datetime) %>
			h2.headline <%= title %>
			.tag-container
				.tag-title Tags:
				ul.tags
					li.tag Environmental reporting
				.edit-tags
					button Edit
			.toolbar
				.group-container(data-side="left")
					.group-item
						.group-title Tell me about:
						ul.tabs
							li.tab.active This story's life
							li.tab Who's reading and sharing it
				.group-container(data-side="right")
					.group-item
						button.create-event + Create event
					.group-item
						span.icon-comparison vs
						select#article-comparer
							option an average article
							option another thing
			section(data-name="timeline")
				h3.title How many people saw it and when was it shared on social media?
				#ST-chart
			section(data-name="social-posts")
				h3.title Who is posting this story to social media?
				img(src="images/dummy/social-posts.png")
			section(data-name="traffic-sources")
				h3.title Where is traffic coming from?
				.description
					p This article generally has above-average traffic both from internal and external referalls. As a percentage, external traffic is larger by 10%, which is pretty normal.
				img(src="images/dummy/traffic-sources.png")
			section(data-name="citations")
				h3.title Who is citing this story
				img(src="images/dummy/citations.png")
			section(data-name="events")
				h3.title What events have happened around this story?
				img(src="images/dummy/events.png")

	script(type="text/jst")#article-grid-container-templ
		#compare-grid
			.header
				.header-meta-container
					.header-meta.cell
						.name Social shares
					.header-meta.cell
						.name Visitors
					.header-meta.cell
						.name Sources
					.header-meta.cell.bars
						.name Tags
				.header-dimensions-container
					.header-el.cell.wide(data-dimension="title")
						.name Headline
					.header-el.cell.date(data-dimension="date")
						.name Date
					.header-el.cell.multi(data-dimension="twitter")
						.name Twitter
					.header-el.cell.multi(data-dimension="facebook")
						.name Facebook
					.header-el.cell.multi(data-dimension="pageviews")
						.name Pageviews
					.header-el.cell.multi(data-dimension="time-on-page")
						.name Time/page
					.header-el.cell.multi(data-dimension="internal")
						.name Internal
					.header-el.cell.multi(data-dimension="external")
						.name External
					.header-el.cell.bars(data-dimension="subject")
						.name Subject
					.header-el.cell.bars(data-dimension="impact")
						.name Impact
			.rows

	//-  TODO, sort by % over comparison
	script(type="text/jst")#article-detail-row-templ
		.article-detail-row-container
			.destroy &times;

block css
	link(rel='stylesheet', href='/stylesheets/thirdparty/spotted-tail.css')

block bootstrap-data
	script(id="page-data").
		var pageData = {};
		pageData.org =!{JSON.stringify(org)};
		pageData.articleSummaries =!{JSON.stringify(articleSummaries)};
		pageData.articleRowDetails =!{JSON.stringify(articleRowDetails)};
		pageData.articleDetails =!{JSON.stringify(articleDetails)};
		pageData.eventSchemas =!{JSON.stringify(eventSchemas)};

block scripts
	script(src="javascripts/thirdparty/jquery-1.11.0.min.js")
	script(src="javascripts/thirdparty/underscore-min.js")
	script(src="javascripts/thirdparty/backbone-min.js")
	script(src="javascripts/thirdparty/d3.v3.min.js")
	script(src="javascripts/thirdparty/isotope.pkgd.min.js")
	script(src="javascripts/thirdparty/spotted-tail.js")
	script(src="javascripts/main.js")